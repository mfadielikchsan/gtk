<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="ippnewone_subreport1" language="groovy" pageWidth="802" pageHeight="554" columnWidth="802" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0">
	<property name="ireport.zoom" value="1.1000000000000003"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="id" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["C:\\Users\\Lenovo\\Documents\\NetBeansProjects\\FormIdpGeneral\\src\\formidpgeneral\\"]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[select ipp2s.*, grup.nama_grup,
	(case 
		when kpi_ref_id is not null 
			then ('COY KPI:' || chr(10) || refs.coy_kpi || chr(10) || chr(10) || 'Target:' || chr(10) || coalesce(refs.target, '-') || chr(10) || chr(10) || 'Initiatives:' || chr(10) || coalesce(refs.initiatives, '-'))
		when kpi_act_id is not null 
			then ('KPI Divsion:' || chr(10) || acts.kpi_div || chr(10) || chr(10) || 'KPI Division Target: ' || chr(10) || coalesce(acts.kpi_div_target, '-') || chr(10) || chr(10) || 'Activity: ' || chr(10) || coalesce(acts.activity, '-')) 
		else '-' end) kpi_detail
from hrdt_ipp2s ipp2s
left join hrdm_ipp_groupitem grup on grup.kode_grup = ipp2s.kode_grup
left join hrdm_kpi_refs refs on refs.id = kpi_ref_id
left join hrdt_kpi_acts acts on acts.id = kpi_act_id
where ipp2s.hrdt_ipp1s_id = $P{id}
order by kd_act;]]>
	</queryString>
	<field name="id" class="java.lang.Integer"/>
	<field name="hrdt_ipp1s_id" class="java.lang.Integer"/>
	<field name="kd_act" class="java.lang.String"/>
	<field name="desc_act" class="java.lang.String"/>
	<field name="weight" class="java.math.BigDecimal"/>
	<field name="mid_target" class="java.lang.String"/>
	<field name="one_target" class="java.lang.String"/>
	<field name="due_date" class="java.sql.Date"/>
	<field name="mid_achievement" class="java.lang.String"/>
	<field name="mid_score" class="java.math.BigDecimal"/>
	<field name="mid_tscore" class="java.math.BigDecimal"/>
	<field name="one_achievement" class="java.lang.String"/>
	<field name="one_score" class="java.math.BigDecimal"/>
	<field name="one_tscore" class="java.math.BigDecimal"/>
	<field name="kpi_ref_id" class="java.lang.Integer"/>
	<field name="kpi_act_id" class="java.lang.Integer"/>
	<field name="unit_desc" class="java.lang.String"/>
	<field name="kode_grup" class="java.lang.String"/>
	<field name="creaby" class="java.lang.String"/>
	<field name="dtcrea" class="java.sql.Timestamp"/>
	<field name="modiby" class="java.lang.String"/>
	<field name="dtmodi" class="java.sql.Timestamp"/>
	<field name="nama_grup" class="java.lang.String"/>
	<field name="kpi_detail" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<columnHeader>
		<band height="27" splitType="Stretch">
			<staticText>
				<reportElement x="346" y="0" width="160" height="25"/>
				<box topPadding="1">
					<pen lineWidth="0.5" lineStyle="Solid"/>
					<topPen lineWidth="0.5" lineStyle="Double"/>
					<leftPen lineWidth="0.5" lineStyle="Solid"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5" lineStyle="Solid"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Top">
					<font fontName="Times New Roman" isBold="true"/>
				</textElement>
				<text><![CDATA[One Year Target]]></text>
			</staticText>
			<staticText>
				<reportElement x="26" y="0" width="145" height="25"/>
				<box topPadding="1">
					<pen lineWidth="0.5" lineStyle="Solid"/>
					<topPen lineWidth="0.5" lineStyle="Double"/>
					<leftPen lineWidth="0.5" lineStyle="Solid"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5" lineStyle="Solid"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Top">
					<font fontName="Times New Roman" isBold="true"/>
				</textElement>
				<text><![CDATA[Program / Activity]]></text>
			</staticText>
			<staticText>
				<reportElement x="311" y="0" width="35" height="25"/>
				<box topPadding="1">
					<pen lineWidth="0.5" lineStyle="Solid"/>
					<topPen lineWidth="0.5" lineStyle="Double"/>
					<leftPen lineWidth="0.5" lineStyle="Solid"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5" lineStyle="Solid"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Top">
					<font fontName="Times New Roman" isBold="true"/>
				</textElement>
				<text><![CDATA[Weight (%) (W)]]></text>
			</staticText>
			<staticText>
				<reportElement x="731" y="0" width="71" height="25"/>
				<box topPadding="1">
					<pen lineWidth="0.5" lineStyle="Solid"/>
					<topPen lineWidth="0.5" lineStyle="Double"/>
					<leftPen lineWidth="0.5" lineStyle="Solid"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5" lineStyle="Solid"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Top">
					<font fontName="Times New Roman" isBold="true"/>
				</textElement>
				<text><![CDATA[Total Score
(W x R)]]></text>
			</staticText>
			<staticText>
				<reportElement x="171" y="0" width="140" height="25"/>
				<box topPadding="1">
					<pen lineWidth="0.5" lineStyle="Solid"/>
					<topPen lineWidth="0.5" lineStyle="Double"/>
					<leftPen lineWidth="0.5" lineStyle="Solid"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5" lineStyle="Solid"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Top">
					<font fontName="Times New Roman" isBold="true"/>
				</textElement>
				<text><![CDATA[KPI Reference]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="0" width="26" height="25"/>
				<box topPadding="1">
					<pen lineWidth="0.5" lineStyle="Solid"/>
					<topPen lineWidth="0.5" lineStyle="Double"/>
					<leftPen lineWidth="0.5" lineStyle="Solid"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5" lineStyle="Solid"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Top">
					<font fontName="Times New Roman" isBold="true"/>
				</textElement>
				<text><![CDATA[No]]></text>
			</staticText>
			<staticText>
				<reportElement x="506" y="0" width="160" height="25"/>
				<box topPadding="1">
					<pen lineWidth="0.5" lineStyle="Solid"/>
					<topPen lineWidth="0.5" lineStyle="Double"/>
					<leftPen lineWidth="0.5" lineStyle="Solid"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5" lineStyle="Solid"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Top">
					<font fontName="Times New Roman" isBold="true"/>
				</textElement>
				<text><![CDATA[One Year Achievement]]></text>
			</staticText>
			<staticText>
				<reportElement x="666" y="0" width="65" height="25"/>
				<box topPadding="1">
					<pen lineWidth="0.5" lineStyle="Solid"/>
					<topPen lineWidth="0.5" lineStyle="Double"/>
					<leftPen lineWidth="0.5" lineStyle="Solid"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5" lineStyle="Solid"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Top">
					<font fontName="Times New Roman" isBold="true"/>
				</textElement>
				<text><![CDATA[Score
(R)]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="20" splitType="Stretch">
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement positionType="Float" stretchType="RelativeToTallestObject" x="311" y="0" width="35" height="20"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{weight}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement positionType="Float" stretchType="RelativeToTallestObject" x="666" y="0" width="65" height="20"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{one_score}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement positionType="Float" stretchType="RelativeToTallestObject" x="731" y="0" width="71" height="20"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{one_tscore}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="false">
				<reportElement positionType="Float" stretchType="RelativeToTallestObject" x="0" y="0" width="26" height="20" isPrintWhenDetailOverflows="true"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Top">
					<font fontName="Serif"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{REPORT_COUNT}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement positionType="Float" stretchType="RelativeToTallestObject" x="346" y="0" width="160" height="20"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement/>
				<textFieldExpression><![CDATA[" " +$F{one_target}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement positionType="Float" stretchType="RelativeToTallestObject" x="26" y="0" width="145" height="20" isRemoveLineWhenBlank="true" isPrintInFirstWholeBand="true"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement/>
				<textFieldExpression><![CDATA[" "+$F{nama_grup} + "\n" + " " +$F{desc_act}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement positionType="Float" stretchType="RelativeToTallestObject" x="171" y="0" width="140" height="20"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement/>
				<textFieldExpression><![CDATA[" " +$F{kpi_detail}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement positionType="Float" stretchType="RelativeToTallestObject" x="506" y="0" width="160" height="20"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement/>
				<textFieldExpression><![CDATA[$F{one_achievement}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<lastPageFooter>
		<band height="29">
			<subreport>
				<reportElement x="0" y="0" width="802" height="29"/>
				<subreportParameter name="SUBREPORT_DIR">
					<subreportParameterExpression><![CDATA[$P{SUBREPORT_DIR}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="id">
					<subreportParameterExpression><![CDATA[$P{id}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "ippnewone_subreport2.jasper"]]></subreportExpression>
			</subreport>
		</band>
	</lastPageFooter>
</jasperReport>
